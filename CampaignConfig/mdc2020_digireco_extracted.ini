[campaign]
experiment = mu2e
poms_role = production
name = MDC2020ad_digireco_extracted_043024
campaign_stage_list = digi_par, digi, reco_par, reco

[campaign_defaults]
vo_role=Production
campaign_keywords={"release_v_dts": "r", "release_v_dig": "ae", 
		   "release_v_rec": "ae", "release_v_o": "ae",
		   "primary_name": "CePlusEndpoint",
		   "digitype": "OnSpill",
		   "stage_name_prefix": "CosmicCRYExtractedCat",
		   "simjob_release": "/cvmfs/mu2e.opensciencegrid.org/Musings/SimJob/MDC2020ae/setup.sh"}

software_version=mdc2020
dataset_or_split_data=startup,best,perfect
cs_split_type=list
completion_type=complete
completion_pct=100

param_overrides = [["-Oglobal.release_v_dts=","%(release_v_dts)s"],["-Oglobal.release_v_dig=","%(release_v_dig)s"],["-Oglobal.release_v_rec=","%(release_v_rec)s"],["-Oglobal.release_v_o=","%(release_v_o)s"],["-Oglobal.primary_name=","%(primary_name)s"],["-Oglobal.simjob_release=","%(simjob_release)s"],["-Oglobal.digitype=","%(digitype)s"],["-Oglobal.stage_name_prefix=","%(stage_name_prefix)s"]]
test_param_overrides = [["-Oglobal.release_v_dts=","%(release_v_dts)s"],["-Oglobal.release_v_dig=","%(release_v_dig)s"],["-Oglobal.release_v_rec=","%(release_v_rec)s"],["-Oglobal.release_v_o=","%(release_v_o)s"],["-Oglobal.primary_name=","%(primary_name)s"],["-Oglobal.simjob_release=","%(simjob_release)s"],["-Oglobal.digitype=","%(digitype)s"],["-Oglobal.stage_name_prefix=","%(stage_name_prefix)s"]]
merge_overrides=True
login_setup=mu2epro_login_v7
job_type=mu2e_digireco_oksuzian_v3_production_jobtype
stage_type=regular
output_ancestor_depth=1

# Stages
[campaign_stage digi_par]
param_overrides = [["--stage ", "digi_par"], ["-Oglobal.db_purpose=", "%(dataset)s"]]
test_param_overrides = [["--stage ", "digi_par"], ["-Oglobal.db_purpose=", "%(dataset)s"]]
job_type = generate_par_oksuzian_v3_digireco_jobtype

[campaign_stage digi]
param_overrides = [["--stage ", "digi"], ["-Oglobal.db_purpose=", "%(dataset)s"]]
test_param_overrides = [["--stage ", "digi"], ["-Oglobal.db_purpose=", "%(dataset)s"]]

[campaign_stage reco_par]
param_overrides = [["--stage ", "reco_par"], ["-Oglobal.db_purpose=", "%(dataset)s"]]
test_param_overrides = [["--stage ", "reco_par"], ["-Oglobal.db_purpose=", "%(dataset)s"]]
job_type = generate_par_oksuzian_v3_digireco_jobtype

[campaign_stage reco]
param_overrides = [["--stage ", "reco"], ["-Oglobal.db_purpose=", "%(dataset)s"]]
test_param_overrides = [["--stage ", "reco"], ["-Oglobal.db_purpose=", "%(dataset)s"]]

# Dependencies
[dependencies digi]
campaign_stage_1 = digi_par
file_pattern_1 = %.tar

[dependencies reco_par]
campaign_stage_1 = digi
file_pattern_1 = %.art

[dependencies reco]
campaign_stage_1 = reco_par
file_pattern_1 = %.tar

[job_type mu2e_digireco_oksuzian_v3_production_jobtype]
launch_script = fife_launch
parameters = [["-c ", "/exp/mu2e/app/users/oksuzian/muse_101323/Production/CampaignConfig/mdc2020_digireco.cfg"]]
output_file_patterns = %.art
recoveries = [["proj_status",[["-Oglobal.override_dataset=','%(dataset)s"],["--stage ","recovery"]]]]

[job_type generate_par_oksuzian_v3_digireco_jobtype]
launch_script = fife_launch
parameters = [["-c ", "/exp/mu2e/app/users/oksuzian/muse_101323/Production/CampaignConfig/mdc2020_digireco.cfg"]]
output_file_patterns = %.tar

[login_setup mu2epro_login_v7]
host=mu2egpvm04.fnal.gov
account=mu2epro
setup=setup fife_utils v3_5_0, poms_client, poms_jobsub_wrapper;
